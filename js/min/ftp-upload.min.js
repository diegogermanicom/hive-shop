var FTPUPLOAD={init:function(){this.uploadAllEvent(),this.uploadEvents(),this.createFolderEvents(),this.compareEvents(),this.getDir("")},getDir:function(e){var a={dir:e};$.ajax({url:ADMIN_PATH+"/ftpu-get-dir",data:a,success:function(e){"ok"==e.get_dir.response?($(".upload-ftp-dir-content").html(e.get_dir.html),$(".ftp-dir").on("click",(function(){if(!$(this).hasClass("disabled")){var e=$(".folder").attr("folder"),a=$(this).attr("name");if($(this).hasClass("no-existe")){var p=$(this).attr("id-folder");$("#popup-upload-ftp-create-id-folder").val(p),$("#popup-upload-ftp-create-folder").html(e),$("#popup-upload-ftp-create-name").html(a),$("#popup-upload-ftp-create").addClass("active")}else{var t=e+"/"+a;$(".ftp-dir").addClass("disabled"),$(".ftp-file").addClass("disabled"),FTPUPLOAD.getDir(t)}}})),$(".ftp-file").on("click",(function(){if(!$(this).hasClass("disabled")){var e=$(this).attr("id-file"),a=$(".folder").attr("folder"),p=$(this).find(".name").attr("name"),t=$(this).find(".size").attr("size"),o=$(this).find(".size").attr("ftp_size");$("#popup-upload-ftp-id-file").val(e),$("#popup-upload-ftp-folder").html(a),$("#popup-upload-ftp-name").html(p),$("#popup-upload-ftp-size").html(t+" bytes"),-1==o?($("#popup-upload-ftp-ftp-size").html("No existe"),$("#btn-upload-ftp-comparar").addClass("hidden")):($("#popup-upload-ftp-ftp-size").html(o+" bytes"),$("#btn-upload-ftp-comparar").removeClass("hidden")),$("#popup-upload-ftp").addClass("active")}}))):($(".ftp-dir").removeClass("disabled active"),$(".ftp-file").removeClass("disabled"),UTILS.showInfo("Uups",e.get_dir.message))}})},uploadAllEvent:function(){$("#btn-upload-all").off().on("click",(function(){var e=$(this);if(!e.hasClass("disabled")){e.addClass("disabled");var a=[],p=[];if($(".upload-ftp-dir-content .ftp-file.warning").each((function(){a.push($(this).find(".name").attr("name")),p.push($(this).attr("id-file"))})),0!=a.length){$(".ftp-dir").addClass("disabled"),$(".ftp-file").addClass("disabled");var t={folder:$(".folder").attr("folder"),files:a};$.ajax({url:ADMIN_PATH+"/ftpu-upload-all",data:t,success:function(a){if("ok"==a.result.response){for(i=0;i<p.length;i++)$(".upload-ftp-dir-content").find('.ftp-file[id-file="'+p[i]+'"]').removeClass("warning no-existe");UTILS.showInfo("Completo",a.result.message)}else UTILS.showInfo("Uups",a.result.message);e.removeClass("disabled"),$(".ftp-dir").removeClass("disabled"),$(".ftp-file").removeClass("disabled")}})}else e.removeClass("disabled")}}))},uploadEvents:function(){$("#btn-upload-ftp").on("click",(function(){var e=$(this),a={folder:$("#popup-upload-ftp-folder").html(),file:$("#popup-upload-ftp-name").html()};e.hasClass("disabled")||(e.addClass("disabled"),$.ajax({url:ADMIN_PATH+"/ftpu-upload",data:a,success:function(a){if("ok"==a.upload.response){var p=$("#popup-upload-ftp-id-file").val();$(".upload-ftp-dir-content").find('.ftp-file[id-file="'+p+'"]').removeClass("warning no-existe"),$("#popup-upload-ftp").removeClass("active"),UTILS.showInfo("Completo",a.upload.message)}else UTILS.showInfo("Uups",a.upload.message);e.removeClass("disabled")}}))})),$("#btn-upload-ftp-close").on("click",(function(){$("#popup-upload-ftp").removeClass("active")}))},createFolderEvents:function(){$("#btn-upload-ftp-create").on("click",(function(){var e=this,a={folder:$("#popup-upload-ftp-create-folder").html(),name:$("#popup-upload-ftp-create-name").html()};$(this).hasClass("disabled")||($(this).addClass("disabled"),$.ajax({url:ADMIN_PATH+"/ftpu-create-folder",data:a,success:function(a){if("ok"==a.folder.response){var p=$("#popup-upload-ftp-create-id-folder").val();$(".upload-ftp-dir-content").find('.ftp-dir[id-folder="'+p+'"]').removeClass("no-existe"),$("#popup-upload-ftp-create").removeClass("active"),UTILS.showInfo("Completo",a.folder.message)}else UTILS.showInfo("Uups",a.folder.message);$(e).removeClass("disabled")}}))})),$("#btn-upload-ftp-create-close").on("click",(function(){$("#popup-upload-ftp-create").removeClass("active")}))},compareEvents:function(){$("#btn-upload-ftp-comparar").on("click",(function(){var e=this,a={folder:$("#popup-upload-ftp-folder").html(),file:$("#popup-upload-ftp-name").html()};$(this).hasClass("disabled")||($(this).addClass("disabled"),$.ajax({url:ADMIN_PATH+"/ftpu-compare",data:a,success:function(a){if("ok"==a.compare.response){var p=$("#popup-upload-ftp-comparar .content").height()-150;$("#popup-upload-ftp-comparar").find("textarea").css("height",p),$("#popup-upload-ftp-comparar-code-server").val(a.compare.code_server),$("#popup-upload-ftp-comparar-code-ftp").val(a.compare.code_ftp),$("#popup-upload-ftp").removeClass("active"),$("#popup-upload-ftp-comparar").addClass("active")}else UTILS.showInfo("Uups",a.compare.message);$(e).removeClass("disabled")}}))})),$("#btn-upload-ftp-comparar-close").on("click",(function(){$("#popup-upload-ftp-comparar").removeClass("active"),$("#popup-upload-ftp").addClass("active")}))}};$(window).ready((function(){FTPUPLOAD.init()}));