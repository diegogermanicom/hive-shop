/**
 * @author Diego Martín
 * @copyright Hive®
 * @version 1.0
 * @lastUpdated 2025
 */
var UTILS={blockAjax:!1,konamiCodePosition:0,init:function(){this.initAjax(),this.backTopEvent(),this.btnPopupCloseEvent(),this.customTabEvent(),this.colorModeEvent(),this.scrollEvent(),this.customCollapse(),this.customList(),this.getCustomListValues()},initAjax:function(){$.ajaxSetup({type:"POST",dataType:"json",error:function(){UTILS.showInfo("Error","An unexpected error has occurred.<br>Reload the page to try again."),UTILS.blockAjax=!1}})},getParameterByName:function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},showInfo:function(e,t){$("#popup-info .title").html(e),$("#popup-info .text").html(t),this.showPopup("#popup-info")},showPopup:function(e){var t=$(e).height();$(e).find(".content").height()>t?$(e).addClass("popup-top"):$(e).removeClass("popup-top"),$(e).addClass("active"),$("body").addClass("block")},closePopup:function(e){$(e).removeClass("active"),$("body").removeClass("block")},validate:function(e,t){var o=null;if("string"!=typeof t&&"number"!=typeof t)return!1;switch("string"==typeof t&&(t=t.toUpperCase()),e){case"name":case"lastname":o=/^[A-ZÁÉÍÓÚÄËÏÖÜÀÈÌÒÙÑçªº .\-]{2,50}$/;break;case"telephone":o=/^(6[0-9]|7[0-9])\d{7}$/;break;case"email":o=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/;break;case"cp":o=/^(?:0[1-9]\d{3}|[1-4]\d{4}|5[0-9]\d{3})$/;break;case"slug":o=/^[A-Z][0-9A-Z\-]{1,90}$/;break;case"price":o=/^([0-9]{1,9})$|^([0-9]+\,+[0-9]{1,2})$/;break;case"weight":o=/^([0-9]{1,9})$|^([0-9]+\,+[0-9]{1,3})$/;break;case"price-negative":o=/^-?([0-9]{1,9}|[0-9]+[.,][0-9]{1,2})$/;break;case"weight-negative":o=/^-?([0-9]{1,9}|[0-9]+[.,][0-9]{1,3})$/;break;case"priceES":o=/^([0-9]{1,9})$|^([0-9]+\.+[0-9]{1,2})$/;break;case"hexadecimal":o=/^#[0-9A-F]{2,7}$/;break;case"no-cero":0!=parseInt(t)&&(t=1),o=/^[1]$/;break;case"date":o=/^([12]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]))$/;break;case"number":o=/^[0-9]+$/;break;case"code":o=/^[0-9A-Z]{1,20}$/;break;case"min-char-3":o=/^.{3,}$/}return null!=o&&o.test(t)},validateForm:function(e){$(e).find("*").removeClass("error");var t={response:!0,errorFields:[]};return $(e).find("input[validate][validate-type], select[validate][validate-type], textarea[validate][validate-type]").each((function(){const e=$(this).attr("validate-type");var o=$(this).val().trim();if(!UTILS.validate(e,o)){$(this).addClass("error"),t.response=!1;const e=$(this).attr("validate-name");null!=e&&t.errorFields.push(e)}})),t},konamiCode:function(e){var t=["up","up","down","down","left","right","left","right","b","a"];({37:"left",38:"up",39:"right",40:"down",65:"a",66:"b"})[e]==t[this.konamiCodePosition]?(this.konamiCodePosition++,this.konamiCodePosition==t.length&&(console.log("Konami Code!"),new Audio(PUBLIC_PATH+"/audio/konami-code.mp3").play(),this.konamiCodePosition=0)):this.konamiCodePosition=0},backTopEvent:function(){$("#back-top").off().on("click",(function(){$("html, body").animate({scrollTop:0},300,"swing")}))},btnPopupCloseEvent:function(){$(".popup .btn-popup-close").off().on("click",(function(){$(this).closest(".popup").removeClass("active"),$("body").removeClass("block")}))},customTabEvent:function(){$(".custom-tab .menu > div").off().on("click",(function(){var e=$(this).attr("id-tab");$(this).closest(".custom-tab").find(".menu > div.active").removeClass("active"),$(this).addClass("active"),$(this).closest(".custom-tab").find(".content > div.active").removeClass("active"),$(this).closest(".custom-tab").find('.content > div[id-tab="'+e+'"]').addClass("active")}))},colorModeEvent:function(){$("#btn-change-color-mode > input").off().on("click",(function(){var e=$(this);if(!e.hasClass("disabled")){e.addClass("disabled"),e.prop("disabled",!0);var t={mode:""};null!=$("#btn-change-color-mode > input:checked").val()?($("body").addClass("dark-mode"),t.mode="dark-mode"):($("body").removeClass("dark-mode"),t.mode="light-mode"),$.ajax({url:PUBLIC_PATH+"/choose-color-mode",data:t,success:function(t){e.prop("disabled",!1),e.removeClass("disabled")}})}}))},scrollEvent:function(){var e=$(window).scrollTop(),t=$("#popup-loading").height();t+e>=t+350?$("header").addClass("float"):$("header").removeClass("float"),e>t/2?$("#back-top").fadeIn():$("#back-top").fadeOut(),$(".animate").each((function(){var o=!1;$(this).offset().top+$(this).height()<=t+e&&$(this).offset().top+$(this).height()>=e&&!$(this).hasClass("active")&&(o=!0),$(this).offset().top+10<=t+e&&$(this).offset().top+10>=e&&!$(this).hasClass("active")&&(o=!0),$(this).offset().top+$(this).height()>t+e&&$(this).offset().top<e&&(o=!0),o&&$(this).addClass("active")}))},customCollapse:function(){$(".custom-collapse li").each((function(){0!=$(this).children(".options").length&&$(this).children(".label").addClass("has-options")})),$(".custom-collapse li .label.has-options").off().on("click",(function(){var e=$(this).parent("li"),t=e.hasClass("active"),o=$(this).closest(".custom-collapse");o.hasClass("only-one")&&o.find("li.active").each((function(){$(this).removeClass("active")})),0!=e.children(".options").length&&(t?e.removeClass("active"):e.addClass("active"))}))},customList:function(){$(".custom-list[selectable] > *").each((function(){$(this).off().on("click",(function(){var e=$(this).parent();e.attr("max-select");if(null==e.attr("multiple")&&e.children().removeClass("active"),$(this).hasClass("active"))$(this).removeClass("active");else{if(null!=e.attr("max-select"))if(e.children(".active").length>=e.attr("max-select"))return!1;$(this).addClass("active")}}))}))},getCustomListValues:function(e){var t=new Array;return $(e).children(".active").each((function(){let e=$(this).attr("value");t.push(e)})),t}};$(window).ready((function(){UTILS.init()})),$(window).on("keydown",(function(e){UTILS.konamiCode(e.keyCode)})),$(window).scroll((function(){UTILS.scrollEvent()}));