var ADMIN_SHIPMENT={init:function(){this.newShipmentEvent(),this.editShipmentEvent(),this.newShippingZoneEvent(),this.editShippingZoneEvent()},getShippingZoneCountries:function(n){var e={id_shipping_zone:parseInt($("#input-id-shipping-zone").val()),id_continent:n};$.ajax({url:ADMIN_PATH+"/get-shipping-zone-countries",data:e,success:function(n){"ok"==n.get_shipping_zone_countries.response&&$("#shipping-zone-countries").html(n.get_shipping_zone_countries.html)}})},getShippingZoneProvinces:function(n){var e={id_shipping_zone:parseInt($("#input-id-shipping-zone").val()),id_country:n};$.ajax({url:ADMIN_PATH+"/get-shipping-zone-provinces",data:e,success:function(n){"ok"==n.get_shipping_zone_provinces.response&&$("#shipping-zone-provinces").html(n.get_shipping_zone_provinces.html)}})},newShipmentEvent:function(){1==$("body#admin-new-shipping-method-page").length&&$("#btn-save-new-shipment").on("click",(function(){var n=$(this),e={alias:$("#input-alias").val().trim(),min_value:parseInt($("#input-min-value").val()),max_value:parseInt($("#input-max-value").val()),min_weight:parseInt($("#input-min-weight").val()),max_weight:parseInt($("#input-max-weight").val()),id_state:parseInt($("#select-state").val()),languages:[]};$("#languages .menu > div").each((function(){let n=$(this).attr("id-tab"),i=$(this).closest("#languages").find('.content > div[id-tab="'+n+'"]'),s={id_lang:parseInt($(this).attr("id-lang")),name:$(i).find(".input-language-name").val().trim()};e.languages.push(s)}));var i=HIVE.validateForm("#form-new-shipment");n.hasClass("disabled")||1!=i.response||(n.addClass("disabled"),$.ajax({url:ADMIN_PATH+"/save-new-shipment",data:e,success:function(e){"ok"==e.save_new_shipment.response?(n.addClass("btn-ok"),window.location.href=ADMIN_PATH+"/shipments?new"):(s,HIVE.showInfo("Error",e.save_new_shipment.message),n.removeClass("disabled"))}}))}))},editShipmentEvent:function(){1==$("body#admin-edit-shipping-method-page").length&&$("#btn-save-edit-shipment").on("click",(function(){var n=$(this),e={id_shipping_method:parseInt($("#input-id-shipping-method").val()),alias:$("#input-alias").val().trim(),min_value:parseInt($("#input-min-value").val()),max_value:parseInt($("#input-max-value").val()),min_weight:parseInt($("#input-min-weight").val()),max_weight:parseInt($("#input-max-weight").val()),id_state:parseInt($("#select-state").val()),languages:[]};$("#languages .menu > div").each((function(){let n=$(this).attr("id-tab"),i=$(this).closest("#languages").find('.content > div[id-tab="'+n+'"]'),s={id_lang:parseInt($(this).attr("id-lang")),name:$(i).find(".input-language-name").val().trim()};e.languages.push(s)}));var i=HIVE.validateForm("#form-edit-shipment");n.hasClass("disabled")||1!=i.response||(n.addClass("disabled"),$.ajax({url:ADMIN_PATH+"/save-edit-shipment",data:e,success:function(e){"ok"==e.save_edit_shipment.response?HIVE.showInfo("Correct!",e.save_edit_shipment.message):HIVE.showInfo("Error",e.save_edit_shipment.message),n.removeClass("disabled")}}))}))},newShippingZoneEvent:function(){1==$("body#admin-new-shipping-zone-page").length&&$("#btn-save-new-shipping-zone").on("click",(function(){var n=$(this),e={name:$("#input-name").val().trim(),id_state:parseInt($("#select-state").val())},i=HIVE.validateForm("#form-new-shipping-zone");n.hasClass("disabled")||1!=i.response||(n.addClass("disabled"),$.ajax({url:ADMIN_PATH+"/save-new-shipping-zone",data:e,success:function(e){"ok"==e.save_new_shipping_zone.response?(n.addClass("btn-ok"),window.location.href=ADMIN_PATH+"/shipping-zones?new"):(HIVE.showInfo("Error",e.save_new_shipping_zone.message),n.removeClass("disabled")),n.removeClass("disabled")}}))}))},editShippingZoneEvent:function(){1==$("body#admin-edit-shipping-zone-page").length&&(this.getShippingZoneCountries(null),this.getShippingZoneProvinces(null),$("#btn-select-all-continents").on("click",(function(){var n=$(this).prop("checked");$("#shipping-zone-continents input").each((function(){$(this).prop("checked",n)}))})),$("#btn-select-all-countries").on("click",(function(){var n=$(this).prop("checked");$("#shipping-zone-countries input").each((function(){$(this).prop("checked",n)}))})),$("#btn-select-all-provinces").on("click",(function(){var n=$(this).prop("checked");$("#shipping-zone-provinces input").each((function(){$(this).prop("checked",n)}))})),$("#select-countries-continents").on("change",(function(){let n=parseInt($(this).val());ADMIN_SHIPMENT.getShippingZoneCountries(n)})),$("#select-provinces-countries").on("change",(function(){let n=parseInt($(this).val());ADMIN_SHIPMENT.getShippingZoneProvinces(n)})),$("#btn-save-edit-shipping-zone").on("click",(function(){var n=$(this),e={id_shipping_zone:parseInt($("#input-id-shipping-zone").val()),name:$("#input-name").val().trim(),id_state:parseInt($("#select-state").val()),continents:[],continents_add:[],countries:[],countries_add:[],provinces:[],provinces_add:[]};$("#shipping-zone-continents input").each((function(){let n=parseInt($(this).val());0!=n&&(e.continents.push(n),$(this).prop("checked")&&e.continents_add.push(n))})),$("#shipping-zone-countries input").each((function(){let n=parseInt($(this).val());0!=n&&(e.countries.push(n),$(this).prop("checked")&&e.countries_add.push(n))})),$("#shipping-zone-provinces input").each((function(){let n=parseInt($(this).val());0!=n&&(e.provinces.push(n),$(this).prop("checked")&&e.provinces_add.push(n))}));var i=HIVE.validateForm("#form-edit-shipping-zone");n.hasClass("disabled")||1!=i.response||(n.addClass("disabled"),$.ajax({url:ADMIN_PATH+"/save-edit-shipping-zone",data:e,success:function(e){"ok"==e.save_edit_shipping_zone.response?HIVE.showInfo("Correct!",e.save_edit_shipping_zone.message):HIVE.showInfo("Error",e.save_edit_shipping_zone.message),n.removeClass("disabled")}}))})))}};$(window).ready((function(){ADMIN_SHIPMENT.init()}));